C251 COMPILER V5.60.0,  main                                                               08/06/22  09:46:17  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE main
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C251\BIN\C251.EXE Sources\User\main.c XSMALL OA FUNCTIONS(REENTRANT) BROWSE INCDIR(.\Sou
                    -rces\User;.\Sources\User\include;.\Sources\FreeRTOS\include;.\Sources\FreeRTOS\portable\STC32G12K128) DEBUG PRINT(.\List
                    -ings\main.lst) OBJECT(.\Objects\main.obj) 

stmt  level    source

    1          
    2          /*
    3           * FreeRTOS STC port V1.0.2
    4           * 
    5           * STC32G12K128功能简介：
    6           *    2组 CAN, 3组Lin, USB, 32位 8051, RMB5,
    7           *    高精准12位ADC, DMA 支持(TFT彩屏, ADC, 4组串口, SPI, I2C )
    8           *  
    9           *  各位用户在后续的使用过程中，如果发现有不正确的地方或者
   10           *  有可改善的地方，请和STC联系，由STC官方进行统一修改并更新版本
   11           *
   12           *  若您的代码或文章中需要引用本程序包中的部分移植代码，请在您的
   13           *  代码或文章中注明参考或使用了STC的FreeRTOS的移植代码
   14          */
   15          
   16          #include "FreeRTOS.h"
   17          #include "task.h"
   18          
   19          #include "display.h"
   20          #include "rtc.h"
   21          #include "ntc.h"
   22          #include "adckey.h"
   23          #include "uart2_3.h"
   24          #include "MatrixKey.h"
   25          #include "DebugPrintf.h"
   26          
   27          void vSystemInit( void );
   28          
   29          void main( void )
   30          {
   31   1          /* 系统初始化 */
   32   1          vSystemInit();
   33   1      
   34   1              /* 创建任务 */
   35   1          xTaskCreate((TaskFunction_t )vDisplayTask,
   36   1                      (const char*    )"DISPLAY",
   37   1                      (uint16_t       )configDEFAULT_STACK_SIZE,
   38   1                      (void*          )NULL,
   39   1                      (UBaseType_t    )(configDEFAULT_PRIORITIES + 1),
   40   1                      (TaskHandle_t*  )NULL);
   41   1          xTaskCreate((TaskFunction_t )vRtcTask,
   42   1                      (const char*    )"RTC",
   43   1                      (uint16_t       )configDEFAULT_STACK_SIZE,
   44   1                      (void*          )NULL,
   45   1                      (UBaseType_t    )(configDEFAULT_PRIORITIES + 1),
   46   1                      (TaskHandle_t*  )NULL);
   47   1          xTaskCreate((TaskFunction_t )vAdcKeyTask,
   48   1                      (const char*    )"ADCKEY",
   49   1                      (uint16_t       )configDEFAULT_STACK_SIZE,
   50   1                      (void*          )NULL,
   51   1                      (UBaseType_t    )(configDEFAULT_PRIORITIES),
   52   1                      (TaskHandle_t*  )NULL);
   53   1          xTaskCreate((TaskFunction_t )vNtcTask,
   54   1                      (const char*    )"NTC",
   55   1                      (uint16_t       )configDEFAULT_STACK_SIZE,
   56   1                      (void*          )NULL,
   57   1                      (UBaseType_t    )(configDEFAULT_PRIORITIES),
C251 COMPILER V5.60.0,  main                                                               08/06/22  09:46:17  PAGE 2   

   58   1                      (TaskHandle_t*  )NULL);
   59   1          xTaskCreate((TaskFunction_t )vUart2_3Task,
   60   1                      (const char*    )"UART2_3",
   61   1                      (uint16_t       )configDEFAULT_STACK_SIZE,
   62   1                      (void*          )1000,  //注意pvParameters参数传地址或者立即数时只有低24位是有效位，最高8
             -位编译时会自动填0. 可通过变量或者常量传送32字节数据.
   63   1                      (UBaseType_t    )(configDEFAULT_PRIORITIES),
   64   1                      (TaskHandle_t*  )NULL);
   65   1          xTaskCreate((TaskFunction_t )vMatrixKeyTask,
   66   1                      (const char*    )"MatrixKey",
   67   1                      (uint16_t       )configDEFAULT_STACK_SIZE,
   68   1                      (void*          )NULL,
   69   1                      (UBaseType_t    )(configDEFAULT_PRIORITIES),
   70   1                      (TaskHandle_t*  )NULL);
   71   1      
   72   1          /* 启动任务调度器开始任务调度 */
   73   1          vTaskStartScheduler();
   74   1      
   75   1          /* 正常情况下不会运行到此处 */
   76   1          while (1);
   77   1      }
   78          
   79          /* 系统初始化代码 */
   80          void vSystemInit( void )
   81          {
   82   1          WTST = 0;     //设置程序指令延时参数，赋值为0可将CPU执行指令的速度设置为最快
   83   1          EAXFR = 1;    //扩展寄存器(XFR)访问使能
   84   1          CKCON = 0;    //提高访问XRAM速度
   85   1      
   86   1          P0M1 = 0x00;   P0M0 = 0x00;     //设置为准双向口
   87   1          P1M1 = 0x00;   P1M0 = 0x00;     //设置为准双向口
   88   1          P2M1 = 0x00;   P2M0 = 0x00;     //设置为准双向口
   89   1          P3M1 = 0x00;   P3M0 = 0x00;     //设置为准双向口
   90   1          P4M1 = 0x00;   P4M0 = 0x00;     //设置为准双向口
   91   1          P5M1 = 0x00;   P5M0 = 0x00;     //设置为准双向口
   92   1          P6M1 = 0x00;   P6M0 = 0x00;     //设置为准双向口
   93   1          P7M1 = 0x00;   P7M0 = 0x00;     //设置为准双向口
   94   1          
   95   1      //    DebugPrintfInit();
   96   1      //    printf("STC32G FreeRTOS 测试程序!\r\n");
   97   1      }


Module Information          Static   Overlayable
------------------------------------------------
  code size            =       257     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =    ------     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =        41     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
