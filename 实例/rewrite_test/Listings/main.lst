C51 COMPILER V9.60.7.0   MAIN                                                              05/21/2025 18:47:28 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE code\main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings
                    -\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "main.h"
   2          
   3          enum {
   4              STATE_TIME = 50,
   5              UART_TIME = 1000
   6          };
   7          
   8          typedef struct {
   9              uchar time;
  10              uchar mode_0;
  11          } STATE;
  12          
  13          STATE state;
  14          
  15          typedef struct {
  16              uint time;
  17              
  18          } UART;
  19          
  20          code uchar str[] = "ciallo~";
  21          UART uart;
  22          
  23          
  24          
  25          void task_loop()
  26          {
  27   1          
  28   1          if (state.time == STATE_TIME)
  29   1          {
  30   2              display_task();
  31   2              state.time = 0;
  32   2          }
  33   1      
  34   1          if (uart.time == UART_TIME)
  35   1          {
  36   2              uart_task();
  37   2              uart.time = 0;
  38   2          }
  39   1      }
  40          
  41          void timer_1_interrupt() interrupt 3
  42          {
  43   1          
  44   1      
  45   1          if ( state.time < STATE_TIME ) { state.time++; }
  46   1      
  47   1          if ( uart.time < UART_TIME ) { uart.time++; }
  48   1          
  49   1          seg_display();
  50   1      }
  51          
  52          
  53          
  54          
C51 COMPILER V9.60.7.0   MAIN                                                              05/21/2025 18:47:28 PAGE 2   

  55          void display_task()
  56          {
  57   1          switch (state.mode_0)
  58   1          {
  59   2              case 0:
  60   2              {
  61   3                  set_seg_value(2, 3, 0, 0, 0, 0, 0, 0);
  62   3              }
  63   2              break;
  64   2      
  65   2           
  66   2          }
  67   1      }
  68          
  69          void uart_task()
  70          {
  71   1          //uart_send(str);
  72   1      }
  73          
  74          void main()
  75          {
  76   1          
  77   1          boot_init();
  78   1          uart_send("设备完成了初始化");
  79   1          while (1)
  80   1          {
  81   2              task_loop();
  82   2          }
  83   1      }
  84          
  85          void boot_init()
  86          {
  87   1          clean_display();
  88   1      
  89   1          
  90   1          Timer1_Init();
  91   1          Uart1_Init();
  92   1          EA = 1;
  93   1      
  94   1          
  95   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    183    ----
   CONSTANT SIZE    =     33    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
