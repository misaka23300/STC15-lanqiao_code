C51 COMPILER V9.60.7.0   SEG                                                               12/10/2025 17:56:40 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE SEG
OBJECT MODULE PLACED IN .\Objects\seg.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main\seg.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\include) DEBUG OBJECTEXTEND
                    - PRINT(.\Listings\seg.lst) TABS(2) OBJECT(.\Objects\seg.obj)

line level    source

   1          /**
   2           * @file seg.c
   3           * @brief æ•°ç ç®¡é©±åŠ¨ä¸å­—æ¨¡å®šä¹‰
   4           * @details æä¾›æ•°ç ç®¡æ˜¾ç¤ºç¼“å†²(seg)ã€å­—æ¨¡æ•°ç»„(letter)ä»¥åŠé€ä½åˆ·æ–°å‡½æ•°(seg_display)ã€
             -‚
   5           *          å­—æ¨¡åœ¨æ˜¾ç¤ºå‰è¢«å–åï¼ˆ~letter[...]ï¼‰ä»¥åŒ¹é…ç›®æ ‡ç¡¬ä»¶çš„é©±åŠ¨ææ€§ã€‚
   6           * @date 2025-12-09
   7           */
   8          
   9          #include "seg.h"
  10          
  11          /**
  12           * @brief æ•°ç ç®¡æ˜¾ç¤ºç¼“å†²
  13           * @details æ¯ä¸ªå…ƒç´ ä¸º letter ä¸­çš„ç´¢å¼•ï¼Œä»£è¡¨å¯¹åº”ä½ä¸Šè¦æ˜¾ç¤ºçš„å­—ç¬¦ã€‚
  14           *          seg_display() ä¼šé€ä½è¯»å–å¹¶è¾“å‡ºåˆ°æ•°ç ç®¡ã€‚
  15           */
  16          uint8_t seg[8] = {0, 0, 0, 0, 0, 0, 0, 0};
  17          
  18          /**
  19           * @brief 7 æ®µå­—æ¨¡è¡¨ï¼ˆæ ‡å‡†æ•°å­—ä¸éƒ¨åˆ†å­—æ¯/ç¬¦å·ï¼‰
  20           * @details æ¯ä¸ªå­—èŠ‚ä¸ºæ®µä½æ©ç ï¼Œå…·ä½“æ®µä½æ˜ å°„ä¾ç¡¬ä»¶æ¥çº¿è€Œå®šã€‚
  21           *          åœ¨å®é™…é©±åŠ¨æ—¶å¯¹è¯¥å­—æ¨¡å–åä»¥æ»¡è¶³é©±åŠ¨é€»è¾‘ã€‚
  22           */
  23          code uint8_t letter[] = { // æ ‡å‡†å­—åº“
  24              //   0    1    2    3    4    5    6    7    8    9    A    B    C    D    E    F
  25              0x3F, 0x06, 0x5B, 0x4F, 0x66, 0x6D, 0x7D, 0x07, 0x7F, 0x6F, 0x77, 0x7C, 0x39, 0x5E, 0x79, 0x71,
  26              // black  -     H    J    K    L    N    o   P    U     t    G    Q    r   M    y
  27              0x00, 0x40, 0x76, 0x1E, 0x70, 0x38, 0x37, 0x5C, 0x73, 0x3E, 0x78, 0x3d, 0x67, 0x50, 0x37, 0x6e, 0xBF, 
             -0x86, 0xDB,
  28              0xCF, 0xE6, 0xED, 0xFD, 0x87, 0xFF, 0xEF, 0x46, 0x63}; // 0. 1. 2. 3. 4. 5. 6. 7. 8. 9. -1
  29          
  30          /**
  31           * @brief æ•°ç ç®¡é€ä½æ‰«æåˆ·æ–°å‡½æ•°
  32           * @details ä½¿ç”¨é™æ€ç´¢å¼• i é€ä½é€‰é€šå¹¶è¾“å‡ºå¯¹åº”æ®µç ï¼š
  33           *          - æ¸…ç©º P0 å¹¶åˆ‡æ¢ latch(7)/latch(0)
  34           *          - è¾“å‡ºä½é€‰ P0 = 1<<i å¹¶ latch
  35           *          - è¾“å‡ºæ®µç  ~letter[seg[i]] å¹¶ latch
  36           * @note è¯¥å‡½æ•°åº”ç”±å‘¨æœŸæ€§ä¸­æ–­æˆ–ä¸»å¾ªç¯é¢‘ç¹è°ƒç”¨ä»¥ç»´æŒæ˜¾ç¤ºç¨³å®šã€‚
  37           * @return void
  38           */
  39          void seg_display()
  40          {
  41   1          static uint8_t i = 0;
  42   1      
  43   1          P0 = 0xFF;
  44   1          latch(7);
  45   1          latch(0);
  46   1      
  47   1          P0 = 0x01 << i;
  48   1          latch(6);
  49   1          latch(0);
  50   1      
  51   1          P0 = ~letter[seg[i]];
  52   1          latch(7);
C51 COMPILER V9.60.7.0   SEG                                                               12/10/2025 17:56:40 PAGE 2   

  53   1          latch(0);
  54   1      
  55   1          i++;
  56   1          if (i == 8) {
  57   2              i = 0;
  58   2          }
  59   1      }
  60          
  61          void seg_set(uint8_t position, uint8_t number)
  62          {
  63   1          seg[position] = number;
  64   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     79    ----
   CONSTANT SIZE    =     44    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      9    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
